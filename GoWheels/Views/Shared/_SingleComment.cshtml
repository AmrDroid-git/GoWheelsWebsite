@model GoWheels.Models.Comment

<div class="comment-card" id="comment-@Model.Id">
    <div class="comment-header">
        <img src="@(Model.User.ImageUrl ?? "/avatar.jpg")"
             onerror="this.onerror=null; this.src='/avatar.jpg';"
             class="comment-avatar"
             alt="@Model.User.Name">
        <div class="flex-grow-1">
            <div class="comment-author">@Model.User.Name</div>
            <div class="comment-date">
                <i class="fa-regular fa-clock me-1"></i>
                @Model.CreatedAt.ToString("MMMM dd, yyyy 'at' h:mm tt")
            </div>
        </div>
    </div>
    <div class="comment-body">@Model.Body</div>
    @if (User.Identity?.IsAuthenticated == true &&
        (User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value == Model.UserId ||
        User.IsInRole("ADMIN")))
    {
        <div class="mt-3">
            <button class="btn btn-sm btn-outline-danger delete-comment" data-id="@Model.Id">
                <i class="fa-solid fa-trash me-1"></i>Delete
            </button>
        </div>
    }
</div>